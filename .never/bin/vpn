#!/bin/bash
#########################################################################
# Author: Wang Wencan
# Created Time: æ—¥ 12/27 19:39:29 2015
# Description: 
#########################################################################
set -e

source $HOME/.never/lib/sh-libs

usage_print()
{
    echo "Usage : $(basename $0) connect/disconnect"
}

if [ $# -ne 1 ]; then
    usage_print
    exit -1
fi

VPN_ETC_PATH=$ETC_PATH/vpn

if [ $1 = "connect" ]; then
    echo "Connecting ..."
    osascript $VPN_ETC_PATH/iHandySoft-vpn-connect.scpt

    sudo route delete 0.0.0.0
    sudo route add 0.0.0.0 10.10.1.1
elif [ $1 = "disconnect" ]; then
    echo "Disconnecting ..."
    osascript $VPN_ETC_PATH/iHandySoft-vpn-disconnect.scpt
    sudo route add 0.0.0.0 192.168.101.1
else
    usage_print
fi


